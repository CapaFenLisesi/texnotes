%%%%%%%%%%%%
% preamble %
%%%%%%%%%%%%
%%%%%%%%%%%%
% packages %
%%%%%%%%%%%%
\usepackage[letterpaper, twoside]{geometry}  % set the margins to 1in on all sides usepackage
\usepackage[bookmarks, hidelinks]{hyperref}  % generates pdf index
\usepackage{cclicenses}
\usepackage{yfonts}                % fancy first letters
\usepackage{graphicx}              % to include figures
\usepackage{mathtools}             % great math stuff
\usepackage{amsfonts}              % for blackboard bold, etc
\usepackage{amsthm}                % better theorem environments
\usepackage{thmtools}              % better interaction with theorem environments
\usepackage{bigints}               % big integrals
\usepackage{color}                 % color
\usepackage[usenames,dvipsnames]{xcolor} % more color
\usepackage{verbatim}              % multiline comments
\usepackage{array}                 % better table formatting
\usepackage{microtype}             % sexier typesetting
\usepackage{url}                   % urls
\usepackage{pgfplots}              % sexier graphs
\usepackage{fancyhdr}              % being fancy
\usepackage{float}                 % more figure control
\usepackage{wrapfig}               % wrapping text around figures
\usepackage{subfigure}             % side-by-side figures
\usepackage{polynom}               % polynomial long division
\usepackage{setspace}              % used to set line spacing, e.g¿ \setstretch{1.3}
\usepackage{makeidx}               % indexing
\usepackage[square, numbers, comma, sort&compress]{natbib}  % Use the ``Natbib'' style for the references in the Bibliography
\usepackage{caption3}              % load caption package kernel first
\usepackage{parskip}               % disable ``parskip'' caption option
\usepackage[small]{caption}
\usepackage[europeancurrents, europeanvoltages, americanresistors, cuteinductors, americanports, nosiunitx, noarrowmos]{circuitikz}            % logic gates
\usepackage{tikz}                  % stuff for circuits and more
%\usepackage{booktabs}             % book-like tables
\usepackage{multirow}
\usepackage{cancel}
\usepackage{fitch}                 % fitch-style proofs
\usepackage{amssymb}
\usepackage{upgreek}
\usepackage{algorithmicx}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{epigraph}
\usepackage{xr} %Allows us to cross-reference in external files

%%%%%%%%%%%%
% settings %
%%%%%%%%%%%%

% initialize indexing commands
\makeindex

% number equations by section
% \numberwithin{equation}{section}
\numberwithin{figure}{chapter}
\numberwithin{table}{chapter}
\numberwithin{subsection}{section}

% resize my tikz/pgf plots
\pgfplotsset{scale=0.5}

% get fancy
\pagestyle{fancy}
% with this we ensure that the chapter and section
% headings are in lowercase.
\renewcommand{\chaptermark}[1]{%
\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{%
\markright{\thesection\ #1}}
\fancyhf{} % delete current header and footer
\fancyhead[LE]{{\bfseries\thepage}\quad\rightmark}
\fancyhead[RO]{\leftmark\quad\bfseries\thepage}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
%\addtolength{\headheight}{0.5pt} % space for the rule
\addtolength{\headheight}{1em} % space for the rule
\fancypagestyle{plain}{%
  \fancyhead{} % get rid of headers on plain pages
  \renewcommand{\headrulewidth}{0pt} % and the line
}

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{Commons}

% draw a thin border around figures
%\floatstyle{boxed}
%\restylefloat{figure}

%%%%%%%%%%%%%%%%%%%% ABBREVIATIONS %%%%%%%%%%%%%%%%%%%%

%my abbreviations

\newcommand{\ec}{\mathrm e}
\newcommand{\iu}{\mathrm i}

% someone else's abbreviations, from uknown source

\newcommand{\pha}{{}_\bullet}
\newcommand{\phb}{{}_\blacktriangle}
\newcommand{\phc}{\blacktriangle}

\newcommand{\dotleq}{\mathrel{\raisebox{1.2ex}{$¿$}\mkern-13.5mu \leq}}
\renewcommand{\projlim}{\varprojlim}
\renewcommand{\injlim}{\varinjlim}
\newcommand{\dottimes}{\stackrel[\cdot]{\times}}

%\newcommand{\xra}[1]{\xrightarrow{#1}}
\newcommand{\xra}[1]{\, \tikz[baseline] \draw (0pt,3.5pt) -- (7pt,3.5pt); {\raisebox{1.5pt}{\ensuremath{\scriptstyle #1}}} \tikz[baseline] \draw [->] (0pt,3.5pt) -- (7pt,3.5pt); \, }

%\renewcommand{\obar}[1]{\overline{#1}}
\newcommand{\ubar}[1]{\underline{#1}}

\newcommand{\set}[1]{\left\{#1\right\}}
\newcommand{\pa}[1]{\left(#1\right)}
\newcommand{\ang}[1]{\left<#1\right>}
\newcommand{\bra}[1]{\left[#1\right]}
\newcommand{\abs}[1]{\left|#1\right|}
\newcommand{\norm}[1]{\left\|#1\right\|}
\newcommand{\mat}[1]{\begin{matrix}#1\end{matrix}}
\newcommand{\pmat}[1]{\pa{\mat{#1}}}
\newcommand{\bmat}[1]{\bra{\mat{#1}}}
\newcommand{\sismat}[1]{\left\{\mat{#1}\right.}
\newcommand{\sm}[1]{\begin{smallmatrix}#1\end{smallmatrix}}
\newcommand{\psm}[1]{\pa{\sm{#1}}}
\newcommand{\bsm}[1]{\bra{\sm{#1}}}
\newcommand{\tci}[2]{\set{\,#1 \mid{} #2\,}}
\newcommand{\tcia}[2]{\ang{\,#1 \mid{} #2\,}}
\newcommand{\pfrac}[2]{\pa{\frac{#1}{#2}}}
\newcommand{\bfrac}[2]{\bra{\frac{#1}{#2}}}
\newcommand{\psfrac}[2]{\pa{\sfrac{#1}{#2}}}
\newcommand{\bsfrac}[2]{\bra{\sfrac{#1}{#2}}}
\newcommand{\der}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\pder}[2]{\pfrac{\partial #1}{\partial #2}}
\newcommand{\sder}[2]{\sfrac{\partial #1}{\partial #2}}
\newcommand{\psder}[2]{\psfrac{\partial #1}{\partial #2}}

\newcommand{\leg}[2]{\pfrac{#1}{#2}}
\newcommand{\estdim}[2]{\left[#1 : #2\right]}
\newcommand{\abel}[2]{\left[#1, #2\right]}
\newcommand{\brk}[2]{\left[#1,#2\right]}

%%%%%%%%%%%%%%%%%%%% OPERATORS %%%%%%%%%%%%%%%%%%%%
\DeclareMathOperator{\Schemes}{\mathfrak{Sch}}
\DeclareMathOperator{\AffineSchemes}{\mathfrak{AffSch}}
\DeclareMathOperator{\Sets}{\mathfrak{Sets}}
\DeclareMathOperator{\Groupoids}{\mathfrak{Groupoids}}
\DeclareMathOperator{\TopologicalSpaces}{\mathfrak{Top}}

\DeclareMathOperator{\Alb}{Alb}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\B}{B}
\DeclareMathOperator{\cod}{cod}
\DeclareMathOperator{\de}{d}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Div}{Div}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\Fix}{Fix}
\DeclareMathOperator{\gen}{g}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\Hilb}{Hilb}
\DeclareMathOperator{\Ho}{H}
\DeclareMathOperator{\ho}{h}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\Image}{Im}
\DeclareMathOperator{\Isom}{Isom}
\DeclareMathOperator{\Mod}{Mod}
\DeclareMathOperator{\Mor}{Mor}
\DeclareMathOperator{\argen}{p_a}
\DeclareMathOperator{\geomgen}{p_g}
\DeclareMathOperator{\Pic}{Pic}
\DeclareMathOperator{\Proj}{Proj}
\DeclareMathOperator{\irr}{q}
\DeclareMathOperator{\res}{res}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\Sing}{Sing}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\Stab}{Stab}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\Tors}{Tors}
\DeclareMathOperator{\vp}{v.p.}

\DeclareMathOperator{\arcsec}{arcsec}
\DeclareMathOperator{\arccot}{arccot}
\DeclareMathOperator{\arccsc}{arccsc}

%%%%%%%%%%%%%%%%%%%% LETTERS %%%%%%%%%%%%%%%%%%%%
\newcommand{\frakM}{\mathfrak{M}}
\newcommand{\frakm}{\mathfrak{m}}

%%%%%%%%%%%%%%%%%%%
% custom commands %
%%%%%%%%%%%%%%%%%%%

\newcommand{\margin}{\marginpar}
\newcommand{\ud}{\,\mathrm{d}}
\newcommand{\lets}{\text{let }}
\DeclareMathOperator{\=H}{\stackrel{\text{H}}{=}}
\newcommand{\ddx}{\frac{\ud}{\ud x}}
\newcommand{\szinfty}{\sum_{n=0}^{\infty}}
\newcommand{\eref}[1]{Eq.$\,$\eqref{#1}}
\newcommand{\leib}[2]{\frac{\ud #1}{\ud #2}}

% Fourier series/fourier integral related commands
\newcommand{\FF}{\,\mathscr{F}}
\newcommand{\Fh}{\hat{f}_c}
\newcommand{\FFc}{\FF_c}

\newcommand{\keyword}[2]{\textbf{#1}\index{#2}}
\newcommand{\thref}[1]{Theorem~\ref{#1}}
\newcommand{\chref}[1]{Chapter~\ref{#1}}
\newcommand{\figref}[1]{Figure~\ref{#1}}
\newcommand{\secref}[1]{Section~\ref{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% theorems                                                               %
%                                                                        %
% \newtheoremstyle{stylename}% name of the style to be used              %
%   {spaceabove}% measure of space to leave above the theorem. E.g.: 3pt %
%   {spacebelow}% measure of space to leave below the theorem. E.g.: 3pt %
%   {bodyfont}% name of font to use in the body of the theorem           %
%   {indent}% measure of space to indent                                 %
%   {headfont}% name of head font                                        %
%   {headpunctuation}% punctuation between head and body                 %
%   {headspace}% space after theorem head; " " = normal interword space  %
%   {headspec}% Manually specify head                                    %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newtheoremstyle{example}% name of the style to be used
  {2ex}% measure of space to leave above the theorem. E.g.: 3pt
  {2ex}% measure of space to leave below the theorem. E.g.: 3pt
  {}% name of font to use in the body of the theorem
  {}% measure of space to indent
  {\bfseries}% name of head font
  {} % punctuation between head and body
  {1em}% space after theorem head; " " = normal interword space
  {}% Manually specify head
\newtheoremstyle{solution}% name of the style to be used
  {1ex}% measure of space to leave above the theorem. E.g.: 3pt
  {1ex}% measure of space to leave below the theorem. E.g.: 3pt
  {}% name of font to use in the body of the theorem
  {}% measure of space to indent
  {\itshape}% name of head font
  {.\\}% punctuation between head and body
  {1em}% space after theorem head; " " = normal interword space
  {}% Manually specify head
\newtheoremstyle{defn}% name of the style to be used
  {2ex}% measure of space to leave above the theorem. E.g.: 3pt
  {2ex}% measure of space to leave below the theorem. E.g.: 3pt
  {}% name of font to use in the body of the theorem
  {}% measure of space to indent
  {\bfseries} % name of head font
  {:}% punctuation between head and body
  {0.5em}% space after theorem head; " " = normal interword space
  {}% Manually specify head
\theoremstyle{example} \newtheorem{ex}{Example}[section]
\theoremstyle{solution} \newtheorem*{sol}{Solution}
\theoremstyle{plain} \newtheorem{theorem}{Theorem}
\theoremstyle{plain} \newtheorem{corollary}{Corollary}
\theoremstyle{defn} \newtheorem*{defn}{Definition}
\theoremstyle{definition} \newtheorem{homework}{Homework}
\theoremstyle{remark} \newtheorem*{remark}{Remark}
\theoremstyle{remark} \newtheorem*{note}{Note}

% recent preamble additions
\allowdisplaybreaks[1]
\newcommand{\Lagr}[1]{\mathcal{L}\left\{#1\right\}(s)}
\newcommand{\Lagri}[1]{\mathcal{L}^{-1}\left\{#1\right\}(t)}
\newcommand{\II}{\begin{center}[$\bigstar$ INCOMPLETE $\bigstar$]\end{center}}
\newcommand{\us}[1]{u_{#1}(t)\,}
\setstretch{1.0}

%\includeonly{discrete/main}
%\includeonly{continuous/main}
